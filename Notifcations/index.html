<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">

<!-- Fullscreen iPhone App -->
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon.png">

<title>iPhone App Notifications + Sound</title>

<style>
body {
    margin: 0;
    background: #121212;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding-top: 80px;
}
button {
    padding: 15px 25px;
    font-size: 20px;
    border: none;
    border-radius: 10px;
    background: #744BFC;
    color: white;
    margin: 10px;
}
</style>
</head>
<body>

<h1>iPhone App Notifications + Sound</h1>

<button id="ask">Enable Notifications</button>
<br>
<button id="send">Send Notification</button>

<!-- Audio element for sound -->
<button id="send">Send Notification + Sound</button>
<audio id="notifSound" src="notification.mp3" preload="auto"></audio>

<script>
document.getElementById("send").onclick = async () => {

    // Show notification (will still use default sound on iOS)
    if ('serviceWorker' in navigator) {
        const reg = await navigator.serviceWorker.ready;
        reg.showNotification("Hello!", {
            body: "Custom sound will play manually",
            icon: "icon.png"
        });
    }

    // Play custom sound manually
    const audio = document.getElementById("notifSound");
    audio.play().catch(e => console.log("Sound play blocked:", e));
};
</script>


    
<script>
// Register service worker
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
}

// Ask for notification permission
document.getElementById("ask").onclick = async () => {
    const perm = await Notification.requestPermission();
    if (perm === "granted") {
        alert("Notifications Enabled!");
    } else {
        alert("Notifications Denied.");
    }
};

// Send notification + play sound
document.getElementById("send").onclick = async () => {
    const reg = await navigator.serviceWorker.ready;

    // Show notification
    reg.showNotification("Hello from your App!", {
        body: "This is a local iPhone notification.",
        icon: "icon.png",
        badge: "icon.png"
    });

    // Play sound
    const audio = document.getElementById("notifSound");
    audio.play().catch(e => console.log("Sound play blocked:", e));
};
</script>

</body>
</html>

